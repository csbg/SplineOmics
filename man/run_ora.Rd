% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/run_ora.R
\name{run_ora}
\alias{run_ora}
\title{run_ora()}
\usage{
run_ora(
  clustering_results,
  databases,
  report_info,
  cluster_hits_report_name,
  clusterProfiler_params = NA,
  mapping_cfg = list(method = "none", from_species = NULL, to_species = NULL),
  enrichGO_cfg = NULL,
  universe = NULL,
  report_dir = here::here()
)
}
\arguments{
\item{clustering_results}{A tibble containing one row per
\code{feature_nr} with metadata and cluster assignments across the
analysis categories. It includes:
\itemize{
  \item \code{feature_nr} – Numeric feature identifier.
  \item \code{feature_name} – Preferred feature name from the source
    data, falling back to the numeric ID if none is available.
  \item \code{gene} – Preferred gene symbol from the annotation or
    cluster data.
  \item \code{cluster_<cond1>} / \code{cluster_<cond2>} – Cluster
    assignments for each time-effect condition.
  \item \code{cluster_cat2} – (Optional) Combined cluster label for
    category 2 hits in the form
    \code{"<cluster_<cond1>>_<cluster_<cond2>>"}; \code{NA} if the
    feature was not a category 2 hit.
  \item \code{cluster_cat3} – (Optional) Combined cluster label for
    category 3 hits in the form
    \code{"<cluster_<cond1>>_<cluster_<cond2>>"}; \code{NA} if the
    feature was not a category 3 hit.
}
For any category-specific cluster column, a value of \code{NA}
indicates that the feature was not significant (not a hit) in that
category.}

\item{databases}{A dataframe with the three columns: DB containing the 
database name, Geneset containng the name of the geneset, and Gene, 
containing the name of the gene. This dataframe can be obtained by specifying
the desired Enrichr databases and downloading them to a for example .tsv file
with the help of the SplineOmics::download_enrichr_databases function, and 
then loading this .tsv file as a dataframe. In essence, this dataframe then
contains all the database info used for the gene set enrichment analysis with
clusterProfiler in this function.}

\item{report_info}{A list containing information for the report generation,
such as omics_data_type and data_description (this is the list used for all
report generating functions of this package).}

\item{cluster_hits_report_name}{Single character string specifying the name 
of the cluster_hits() function report, that contains the results that were
used for the overprepresentation analysis here. Must be specified, because
otherwise, the connection is not documented.}

\item{clusterProfiler_params}{A list that specifies the parameters for the 
clusterProfiler, such as for example: clusterProfiler_params <- list(
  pvalueCutoff = 0.05,
  pAdjustMethod = "BH",
  minGSSize = 10,
  maxGSSize = 500,
  qvalueCutoff = 0.2
)
(Those are all the parameters that can be controlled here). The names are 
equivalent to the argument names of clusterProfiler, therefore, check out the 
documentation of clusterProfiler for their description. When this argument is
not specified, it is per default NULL, in which case default parameters for
those are selected, which are equivalent to the parameter values shown in the 
example definition above.}

\item{mapping_cfg}{A named list that controls the optional behavior of
automatically mapping gene symbols across species. This is useful
when your input gene symbols (e.g., from CHO cells) do not match
the species used by the enrichment databases (e.g., human or mouse).
By default, no mapping is performed and gene symbols are used as-is.
If mapping is desired, this list must contain the following **three**
elements:
\describe{
  \item{method}{Mapping method to use. One of `"none"` (default; 
  no mapping), `"gprofiler"` (online, via the g:Profiler API), or
   `"orthogene"` (offline, if installed).}
  \item{from_species}{Source species code 
  (e.g., `"cgriseus"` for CHO). Must match the expected format for
   the selected tool.}
  \item{to_species"}{Target species code 
  (e.g., `"hsapiens"` for human). This must be the species used in
   your ORA database.}
}}

\item{enrichGO_cfg}{A named list specifying the configuration for 
running GO enrichment with Bioconductor's 
\code{\link[clusterProfiler]{enrichGO}}.
This is only needed when you want to perform GO Biological Process (BP), 
Molecular Function (MF), or Cellular Component (CC) enrichment using 
Bioconductor's organism databases (e.g., \code{org.Mm.eg.db} for mouse).

The list must be named according to the GO ontology, e.g., \code{"GO_BP"}, 
\code{"GO_MF"}, \code{"GO_CC"}. Each entry must provide:
\itemize{
  \item \code{OrgDb}: The organism database, e.g., \code{org.Mm.eg.db}.
  \item \code{keyType}: The gene identifier type, e.g., \code{"SYMBOL"}.
  \item \code{ontology}: One of \code{"BP"}, \code{"MF"}, or \code{"CC"}.
}

If \code{enrichGO_cfg} is \code{NULL} (default), no Bioconductor-based GO 
enrichment is performed. All enrichment runs through 
\code{\link[clusterProfiler]{enricher}} with the provided TERM2GENE mappings.}

\item{universe}{Enrichment background data, default is NULL. This is a
parameter of clusterProfiler, for the documentation, please check the 
documentation of the clusterProfiler R package.}

\item{report_dir}{Directory where the report will be saved, default is
`here::here()`.}
}
\value{
A list of all plot objects, generated for the ora report.
}
\description{
This function generates a overrepresentation analysis report based
on clustered hit levels, gene data, and specified databases. It accomplishes 
this by using the R package clusterProfiler. As output, you will receive a
list of the plot objects it generated, and an HTML report with embedded files
containing the enrichment results, and dotplots visualizing the enrichment.
}
